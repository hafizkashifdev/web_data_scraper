{"openapi":"3.0.0","info":{"title":"Digital Wallet","description":"Offers a convenient way for consumers to use their card for fast and contactless purchasing\n","version":"1.0"},"servers":[{"url":"https://sandbox-api.barclaysus.com:443/sandbox/digital-wallet/v1"}],"paths":{"/cards/accounts/{accountId}/devices/wallets/eligibility":{"post":{"tags":["wallet-service-external-api"],"summary":"Get Wallet Eligibility Status","description":"API to check if the user is eligibile for wallet provisioning","operationId":"getWalletEligibility","parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"schema":{"type":"string","description":"Authorization"}},{"name":"Content-Type","in":"header","description":"Content-Type","required":true,"schema":{"type":"string","description":"Content-Type"}},{"name":"Correlation-ID","in":"header","description":"Unique end-to-end trace ID. The initiating system (such as a Channel or  Batch Job), must generate this unique ID, then this must be passed  through the API call stack. This is required to maintain compliance with the current Barclays REST Standard.","required":true,"schema":{"type":"string","description":"Unique end-to-end trace ID. The initiating system (such as a Channel or  Batch Job), must generate this unique ID, then this must be passed  through the API call stack. This is required to maintain compliance with the current Barclays REST Standard. "}},{"name":"accountId","in":"path","description":"External Account Id","required":true,"schema":{"type":"string","description":"External Account Id"}}],"requestBody":{"description":"Request Payload for Wallet Eligibility API.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalWalletEligibilityRequestData"}}},"required":true},"responses":{"200":{"description":"Wallet Eligibility Response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalWalletEligibilityResponseData"}}}},"201":{"description":"Created","content":{"application/json":{}}},"400":{"description":"The request could not be understood by the server due to malformed  syntax. The client SHOULD NOT repeat the request without  modifications.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"401":{"description":"The user could not be authenticated for this request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"500":{"description":"Server encountered an error processing request. This should not  happen normally, but it is a generic error message, given when  no more specific message is suitable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"403":{"description":"Forbidden","content":{"application/json":{}}},"404":{"description":"Server has not found a resource with that URI. This may be  temporary and permanent condition. This status code is  commonly used when the server does not wish to reveal  exactly why the request has been refused, or when no other  response is applicable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"503":{"description":"temporary maintenance of service, try again later. The implication  is that this is a temporary condition which will be alleviated  after some delay. If known, the length of the delay will be  indicated in a Retry-After header. If no Retry-After is given,  the client SHOULD handle the response as it would for a 500 response.  Note: The existence of the 503 status code does not imply that a  server will use it when becoming overloaded. Servers may simply  refuse the connection.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}}},"deprecated":false}},"/devices/wallets/provision":{"post":{"tags":["wallet-service-external-api"],"summary":"To Provision Digital Wallets","description":"Add card to wallet for given wallet type using Digital Wallet Provision API","operationId":"fetchWalletProvision","parameters":[{"name":"Authorization","in":"header","description":"Authorization","required":true,"schema":{"type":"string","description":"Authorization"}},{"name":"Content-Type","in":"header","description":"Content-Type","required":true,"schema":{"type":"string","description":"Content-Type"}},{"name":"Correlation-ID","in":"header","description":"Unique end-to-end trace ID. The initiating system (such as a Channel or  Batch Job), must generate this unique ID, then this must be passed  through the API call stack. This is required to maintain compliance with the current Barclays REST Standard.","required":true,"schema":{"type":"string","description":"Unique end-to-end trace ID. The initiating system (such as a Channel or  Batch Job), must generate this unique ID, then this must be passed  through the API call stack. This is required to maintain compliance with the current Barclays REST Standard. "}},{"name":"X-Content-Encryption-Key-Id","in":"header","description":"Required when API has PCI/PII data. Key Id used by Third-party to encrypt the PCI and PII data","required":false,"schema":{"type":"string","description":"Required when API has PCI/PII data. Key Id used by Third-party to encrypt the PCI and PII data "}},{"name":"X-Content-Encryption-Session-Key","in":"header","description":"Required when API has PCI/PII data. Base64 string session key generated by Third-Party to encrypt the PCI and PII data","required":false,"schema":{"type":"string","description":"Required when API has PCI/PII data. Base64 string session key generated by Third-Party to encrypt the PCI and PII data "}},{"name":"X-Content-Encryption-Type","in":"header","description":"Required when API has PCI/PII data. Type of encryption used to encrypt the data.","required":false,"schema":{"type":"string","description":"Required when API has PCI/PII data. Type of encryption used to encrypt the data. ","enum":["ASYMMETRIC","HYBRID"],"default":"HYBRID"}}],"requestBody":{"description":"Request Payload to Provision Digital Wallets.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalWalletRequestData"}}},"required":true},"responses":{"200":{"description":"Wallet Provision Response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalWalletResponseData"}}}},"201":{"description":"Created","content":{"application/json":{}}},"400":{"description":"The request could not be understood by the server due to malformed  syntax. The client SHOULD NOT repeat the request without  modifications.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"401":{"description":"The user could not be authenticated for this request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"500":{"description":"Server encountered an error processing request. This should not  happen normally, but it is a generic error message, given when  no more specific message is suitable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"403":{"description":"Forbidden","content":{"application/json":{}}},"404":{"description":"Server has not found a resource with that URI. This may be  temporary and permanent condition. This status code is  commonly used when the server does not wish to reveal  exactly why the request has been refused, or when no other  response is applicable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}},"503":{"description":"temporary maintenance of service, try again later. The implication  is that this is a temporary condition which will be alleviated  after some delay. If known, the length of the delay will be  indicated in a Retry-After header. If no Retry-After is given,  the client SHOULD handle the response as it would for a 500 response.  Note: The existence of the 503 status code does not imply that a  server will use it when becoming overloaded. Servers may simply  refuse the connection.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseType"}}}}},"deprecated":false}}},"components":{"schemas":{"ExternalWalletEligibilityRequestData":{"title":"ExternalWalletEligibilityRequestData","required":["data"],"type":"object","properties":{"data":{"$ref":"#/components/schemas/ExternalWalletEligibilityRequest"}},"description":"Wallet Eligibility Request Data."},"ExternalWalletResponseData":{"title":"ExternalWalletResponseData","type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/ExternalWalletResponse"}}},"description":"Wallet Provision Response Data"},"ExternalWalletResponse":{"title":"ExternalWalletResponse","type":"object","properties":{"activationData":{"type":"string"},"customerAddress":{"$ref":"#/components/schemas/CustomerAddress"},"encryptedPassData":{"type":"string"},"ephemeralPublicKey":{"type":"string"},"phone":{"type":"string"}},"description":"Response details of Wallet Provision"},"ValidationData":{"title":"ValidationData","type":"object","properties":{"deviceFingerprint":{"type":"string"},"deviceFingerprintType":{"type":"string","enum":["NONE","FRAUDNET_B64","RSA_B64","THREATMETRIX","CUSTOM"]}},"description":"Device Detail"},"ErrorType":{"title":"ErrorType","type":"object","properties":{"code":{"type":"string"},"detail":{"type":"string"},"id":{"type":"string"},"title":{"type":"string"}},"description":"Message details - additional operation execution information."},"ExternalWalletEligibilityResponseData":{"title":"ExternalWalletEligibilityResponseData","type":"object","properties":{"data":{"$ref":"#/components/schemas/ExternalWalletEligibilityResponse"}},"description":"Wallet Eligibility Response Data"},"ExternalWalletRequest":{"title":"ExternalWalletRequest","required":["accountId","deviceName","eligibilityToken","osName","osVersion","sourceChannel","walletId"],"type":"object","properties":{"accountId":{"type":"string","description":"Account ID","example":"7d444840-9dc0-11d1-b245-5ffdce74fad2"},"clientDeviceId":{"type":"string"},"clientWalletAccountId":{"type":"string"},"deviceName":{"type":"string"},"eligibilityToken":{"type":"string"},"leafCertificate":{"type":"string"},"nonceId":{"type":"string"},"nonceSignature":{"type":"string"},"osName":{"type":"string","enum":["IOS","ANDROID"]},"osVersion":{"type":"string"},"sourceChannel":{"type":"string"},"subCertificate":{"type":"string"},"walletId":{"type":"string","enum":["101","103","217","216"]}},"description":"Request Payload to Provision Digital Wallets."},"ErrorResponseType":{"title":"ErrorResponseType","type":"object","properties":{"errors":{"type":"array","items":{"$ref":"#/components/schemas/ErrorType"}}},"description":"An API error response. "},"ExternalWalletEligibilityRequest":{"title":"ExternalWalletEligibilityRequest","required":["enrollmentIndicator","provisionType","sourceChannel","validationData","walletId"],"type":"object","properties":{"enrollmentIndicator":{"type":"string","description":"Enrollment Indicator","enum":["NEW","RE_ENROLL"]},"provisionType":{"type":"string","description":"Provisioning Type","enum":["INSTANT","STANDARD"]},"sourceChannel":{"type":"string","description":"Source Channel","example":"GAP-Mobile"},"validationData":{"$ref":"#/components/schemas/ValidationData"},"walletId":{"type":"string","description":"WalletId indicating the what wallet we are trying to enroll in.","example":"103","enum":["101","103","217","216"]}},"description":"Wallet Eligibility Request."},"ExternalWalletRequestData":{"title":"ExternalWalletRequestData","required":["data"],"type":"object","properties":{"data":{"$ref":"#/components/schemas/ExternalWalletRequest"}},"description":"Request data to Provision Digital Wallets."},"ExternalWalletEligibilityResponse":{"title":"ExternalWalletEligibilityResponse","type":"object","properties":{"advice":{"type":"string","enum":["APPROVED","DECLINED","CHALLENGE"]},"eligibilityToken":{"type":"string"},"reason":{"type":"string"}},"description":"Wallet Eligibility Response."},"CustomerAddress":{"title":"CustomerAddress","type":"object","properties":{"addrLine1":{"type":"string"},"addrLine2":{"type":"string"},"addrLine3":{"type":"string"},"city":{"type":"string"},"countryCode":{"type":"string"},"postalCode":{"type":"string"},"stateProv":{"type":"string"}},"description":"Customer Address Details and is required only for Google Wallet"}}},"tags":[{"name":"external-wallet-controller","description":"the devices API"}]}